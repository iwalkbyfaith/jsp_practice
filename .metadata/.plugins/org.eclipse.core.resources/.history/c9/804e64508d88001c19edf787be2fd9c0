<!-- 세션을 활용한 로그인 처리 2 로그인 조건문 & 로그인 실패시 -->

<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>

<%
	// POST로 받은 한글이 깨지는 경우 사용하는 코드
	request.setCharacterEncoding("utf-8");
	
	// 폼에서 넘어온 데이터를 String 변수에 넣어줌
	String formId = request.getParameter("id");
	String formPw = request.getParameter("pw");
	String formNick = request.getParameter("nick");
	String formAuto = request.getParameter("auto");

	
	// 로그인 로직
	if(formId.equals("kkk1234") && formPw.equals("1111")){
		
		// 이건 쿠키
		if(formAuto != null){
			Cookie auto = new Cookie("auto_login", formId);
			auto.setMaxAge(500);
			response.addCookie(auto);
		}
		
		
		// 이건 세션
		session.setAttribute("session_id", formId);
		session.setAttribute("session_pw", formPw);
		session.setAttribute("session_nick", formNick);
		
		response.sendRedirect("session_welcome.jsp");
	}

%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

	<a href="session_login.jsp">로그인창으로 돌아가기</a>

</body>
</html>